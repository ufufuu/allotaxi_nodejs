<!DOCTYPE html> 
<html> 
    <head> 
        <title>Chat App</title> 
        <link rel="icon" href="/img/favicon.png"> 
        <link rel="stylesheet" href="/css/styles.min.css"> 
		<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.8.1/socket.io.min.js"></script>-->
			<script src="./src/socketio/socket.io.min.js"></script>
		<script>
			const socket = io('http://localhost:3001/');
			//socket.emit('onBookingRequest', {'lat':latitude, 'lng':longitude });
			
			socket.on("onRideBooking", () => {
				alert("Notification:");				
			});
		</script>
    </head> 
    <body> 
        <div class="centered-form"> 
            <div class="centered-form__box"> 
                <h1>Join</h1> 
                <form action="/chat.html"> 
                    <label>Display name</label> 
                    <input type="text" name="username" placeholder="Display name" required> 
                    <label>Room</label> 
                    <input type="text" name="room" placeholder="Room" required> 
                    <button>Join</button> 
                </form> 
            </div>  
        </div> 
    </body> 
</html>

<!--
	- https://github.com/googlemaps/google-maps-services-js
		- https://www.npmjs.com/package/@googlemaps/react-native-navigation-sdk

https://developers.google.com/maps/documentation/mobility/fleet-engine/essentials/vehicles/on-demand-search-vehicle

	- https://github.com/googleapis/google-cloud-node/blob/main/packages/google-maps-fleetengine/samples/generated/v1/trip_service.create_trip.js
	
	- https://www.npmjs.com/package/@googlemaps/react-native-navigation-sdk
	
	- https://www.npmjs.com/package/@googlemaps/fleetengine
	
/*
Core Components : real-time communication: Implements WebSockets (e.g., Socket.IO) to 
facilitate instant updates of driver locations and ride requests/status.

Database with Geospatial Indexing: Uses solutions like MongoDB or Redis with spatial 
indexing (e.g., Geohash or R-tree) to efficiently query nearby drivers based on location data.

0. Integrates third-party APIs like Google Maps for route calculations, distance/time estimations, and map visualization

2. Geospatial Filtering
When a rider submits a request, the system first queries the database for drivers
within a certain geographical radius of the rider's origin. This initial filtering is crucial for performance

3. Feasibility Check (Spatial indexing for fast , and Temporal)
For each potential driver match, the algorithm checks feasibility using constraints: 

    Spatial Feasibility: The rider's origin and destination must be along the driver's route or within a maximum allowed detour distance.
    Temporal Feasibility: The driver must be able to pick up the rider within their specified time window and arrive at the destination on time.
    Capacity Constraint: The driver must have enough empty seats 

Scoring/Ranking
Feasible matches are then scored based on the system's objective function. Common factors include: 

    Proximity: Closeness of the driver to the rider's pickup location.
    Efficiency: Minimal driver detour time/distance.
    User Ratings: Prioritizing drivers with higher ratings.
    Compatibility: (For shared-ride pooling) Using data like social preferences to improve match quality. 
Assignment
The system selects the best-ranked driver. In simple systems, the top choice is notified immediately. 
For complex, real-time systems with many concurrent requests, advanced algorithms like the Hungarian algorithm or 
other heuristic approaches might be used to find the optimal global matching solution across all available drivers and riders. 

*/

//  Libraries like node-geohash or built-in geospatial queries in MongoDB are very useful for the filtering step
// https://github.com/eric19960304/Ridesharing-App-For-HK-Back-End/tree/master/src
//https://github.com/eric19960304/Ridesharing-App-For-HK-Back-End
// https://github.com/hhc97/routescc-client-driver-matching-app

// - Distance Matrix API
// - Geocoding API: 
// - Maps JavaScript API Nearby Search

// https://medium.com/@shubhamrajput252000/how-to-find-the-nearest-location-using-google-maps-in-a-mern-stack-application-81baab1cca1c ***
// https://www.uber.com/en-GH/blog/tech-stack-part-one-foundation/
// ** https://www.dhiwise.com/post/ride-matching-algorithm-for-a-smoother-rideshare-experience
// https://dev.to/biswasprasana001/designing-a-ride-hailing-service-system-eg-uberlyft-a-beginner-friendly-guide-252o

// ###

//https://jurajmajerik.com/blog/matching-drivers-customers/ (3)

// https://dilipkumar.medium.com/system-design-for-uber-ride-hailing-application-b95ac796c90d

// https://www.geeksforgeeks.org/system-design/how-uber-finds-nearby-drivers-at-1-million-requests-per-second/

// " uber like ride matching algorithm

// https://github.com/hhc97/routescc-client-driver-matching-app   --- (2)

 //(1)
// https://medium.com/@shubhamrajput252000/how-to-find-the-nearest-location-using-google-maps-in-a-mern-stack-application-81baab1cca1c

// https://taborder.co.za/taborder/db-context

// https://blog.logrocket.com/building-real-time-location-app-node-js-socket-io/#rest-api-websockets

// ### 
//https://blog.logrocket.com/building-real-time-location-app-node-js-socket-io/#rest-api-websockets


// real time api gateway layer 

// geospatial db : quick query driver near spec. point

//redis with geohash , for in-memory location + high speed location data management
// mongo db <- geospatial indexing capabilities 

//Routing Services : OSRM , open source routing machine 4 calculations distance, fastest routes , eta-scored

// Scalability , nodejs micro architec  <-- Kafka


// non-blocking i/o model
// event-driven 
// concurrent requests  handling 
/*
Since our architecture is microservices-based, services will be communicating with each other as well. 
Generally, REST or
 HTTP performs well but we can further improve the performance using gRPC which is more lightweight and efficient
 Learn more about REST, GraphQL, gRPC and how they compare with each other.
*/
/*
- google S2 library npm ?
- All the active cabs keep on sending the location to the server once every 4 seconds through a web application firewall and load balancer.All the active cabs keep on sending the location
 to the server once every 4 seconds through a web application firewall and load balancer.

*/
/*
 - npm:  geo hashing  1spatial indexing : r-tree 
*/

// https://www.geeksforgeeks.org/system-design/system-design-of-uber-app-uber-system-architecture/

// https://medium.com/@karan99/system-design-uber-33593137a4fe	* * * 

//https://dev.to/kogab/mongodb-geospatial-queries-how-to-query-based-on-geographic-location-5cjh

// https://stackoverflow.com/questions/78215319/how-to-do-geospatial-queries-in-postgresql-like-in-mongodb

/*   want to make a query to find all objects within a radius

@Query(value = "SELECT * FROM your_entity_table 
                WHERE (6371 
                       * acos(  cos(radians(:latitude)) 
                                * cos(radians(latitude)) 
                                * cos(  radians(longitude) 
                                      - radians(:longitude) ) 
                              + sin(radians(:latitude))
                                * sin(radians(latitude)) 
                             )
                      ) < :radius"
       , nativeQuery = true)
*/

/*
@Query(value = "SELECT * FROM your_entity_table 
                WHERE ST_DWithin( your_point
                                 ,ST_MakePoint(:longitude,:latitude)
                                 ,:radius)"
       , nativeQuery = true)
*/

/*
SELECT * FROM "Locations"
    WHERE (6371 
        * acos(  cos(radians(:Latitude)) 
            * cos(radians("Latitude")) 
                * cos(  radians("Longitude") 
                    - radians(:Longitude) ) 
                    + sin(radians(:Latitude))
    * sin(radians("Latitude")) 
  )
   ) < :radius
*/
-->
<!-- https://www.elephantsql.com/
-- https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.3/socket.io.min
-- https://taborder.co.za/taborder/db-context
-- how to make money creating blockchain
-- https://tympanus.net/codrops/2012/10/11/real-time-geolocation-service-with-node-js/
-- https://gist.github.com/bhubr/bbddcb34d570aec75b5c53943fb7f5d1
-->

<!--

// https://github.com/socketio/socket.io-chat-platform/blob/main/server/package.json

// https://www.tigerdata.com/blog/how-we-made-postgresql-the-best-vector-database
// https://dev.to/biswasprasana001/designing-a-ride-hailing-service-system-eg-uberlyft-a-beginner-friendly-guide-252o
// https://www.geeksforgeeks.org/sql/how-to-design-a-database-for-ride-sharing-and-carpooling-services/
// // https://stackoverflow.com/questions/34997598/sql-database-ride-sharing
// https://analyticsengines.com/resources/insights/analysing-nyc-taxi-data-with-postgresql-timescaledb-and-python/
// https://www.hellointerview.com/learn/system-design/problem-breakdowns/uber
// https://www.alibabacloud.com/blog/database-design-and-implementation-of-a-ride-hailing-dispatch-system_597161
// https://medium.com/@deepdeepak2222/how-to-implement-a-ride-matching-system-using-postgres-postgis-and-python-93cdcc5d0d55
// https://www.geeksforgeeks.org/sql/how-to-design-a-database-for-ride-sharing-and-carpooling-services/
// POST GRES GIS Extensions for Ride Sharing ?

// event and delega in nodejs ?

// #######################
// Carte Vurtuelle de Wave
// Carte virtuelle Wave , Visa
// Intercargo Cote d-Ivoire, es ivoiriens ne peuvent faire les adresses en Erurope ni aux Etas-Unis 
// Kady Liliane Samassi - Intercargo CI 
// 212 390 54 54 ?
//2-8 cenral avennu # 100
// -- suite 100 nj 07
// city East Orange nj  07018
// make this my default adress

-->

<!--


// https://www.tigerdata.com/blog/how-we-made-postgresql-the-best-vector-database
// https://dev.to/biswasprasana001/designing-a-ride-hailing-service-system-eg-uberlyft-a-beginner-friendly-guide-252o
// https://www.geeksforgeeks.org/sql/how-to-design-a-database-for-ride-sharing-and-carpooling-services/
// // https://stackoverflow.com/questions/34997598/sql-database-ride-sharing
// https://analyticsengines.com/resources/insights/analysing-nyc-taxi-data-with-postgresql-timescaledb-and-python/
// https://www.hellointerview.com/learn/system-design/problem-breakdowns/uber
// https://www.alibabacloud.com/blog/database-design-and-implementation-of-a-ride-hailing-dispatch-system_597161
// https://medium.com/@deepdeepak2222/how-to-implement-a-ride-matching-system-using-postgres-postgis-and-python-93cdcc5d0d55
// https://www.geeksforgeeks.org/sql/how-to-design-a-database-for-ride-sharing-and-carpooling-services/
// POST GRES GIS Extensions for Ride Sharing ?

// event and delega in nodejs ?

// #######################
// Carte Vurtuelle de Wave
// Carte virtuelle Wave , Visa
// Intercargo Cote d-Ivoire, es ivoiriens ne peuvent faire les adresses en Erurope ni aux Etas-Unis 
// Kady Liliane Samassi - Intercargo CI 
// 212 390 54 54 ?
//2-8 cenral avennu # 100
// -- suite 100 nj 07
// city East Orange nj  07018
// make this my default adress

//2. Broadcast the update in real-time to other subscribers
//socket.emit('onPickUpRider', data);   // vs io.emit to All connected clients
		
//io.to('CI3bN_CtNW5T9SrMAAAH').emit('onPickUpRider', data);
	
// from client
// io.addEventListener('user-ocation-update', ()=> {
//})
// socket.emit('udpateLocation', {driverId, lng, lat});

// https://dev.to/olatisunkanmi/building-robust-nodejs-applications-with-socketio-best-practices-5hm5

// https://ably.com/topic/socketio

//https://medium.com/@mogold/nodejs-socket-io-express-multiple-modules-13f9f7daed4c


/*
REVENU QUEBEC
Centre d'appels - Direction générale du recouvrement
1 866 832-6765 (sans frais)
Numéro de référence : 19781556
*/

/*
plongeur 
- hotel/restau Lieges Van der Valk  Lieges-congres
*/

/*
For more complex applications, you can look into using namespaces or a Redis adapter

 if you need to scale horizontally across multiple Node.js instances.
*/
 
/*
AMA : - Courriel : raymond.thai@nrcan-rncan.gc.ca  --- parcnmdai.apncrimos@tpsgc-pwgsc.gc.ca
- trent.clemenhagen@international.gc.ca: 25-292872/B 
- Elizabeth.Kadamani@forces.gc.ca : W6369-26-P5QC

#####

***
- 
- file:///C:/Users/MonPC/Downloads/NPP-3965-CMHC-SCHL%20Rev%201.pdf


- Canada-European Union Comprehensive Economic and Trade Agreemen
- Canada-UK TCA
*/
-->